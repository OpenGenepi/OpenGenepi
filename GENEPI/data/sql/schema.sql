CREATE TABLE account (id INT AUTO_INCREMENT, value FLOAT(18, 2) NOT NULL, monetary_account TINYINT NOT NULL, created_at DATETIME NOT NULL, act_id INT NOT NULL, INDEX act_id_idx (act_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE account_user (id INT AUTO_INCREMENT, account_id INT NOT NULL, user_id INT NOT NULL, INDEX account_id_idx (account_id), INDEX user_id_idx (user_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE act (id INT AUTO_INCREMENT, designation VARCHAR(45) NOT NULL, shortened_designation VARCHAR(20) NOT NULL, comment VARCHAR(250), quantity FLOAT(18, 2), duration VARCHAR(45), max_members INT, extra_cost FLOAT(18, 2), disabled TINYINT, act_type_id INT NOT NULL, unity_id INT, beginning_datetime DATETIME, end_date DATE, recurrence VARCHAR(8), monetary_account TINYINT, INDEX unity_id_idx (unity_id), INDEX act_type_id_idx (act_type_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE act_price (id INT AUTO_INCREMENT, act_id INT NOT NULL, act_public_category_id INT NOT NULL, value FLOAT(18, 2) NOT NULL, INDEX act_public_category_id_idx (act_public_category_id), INDEX act_id_idx (act_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE act_public_category (id INT AUTO_INCREMENT, designation VARCHAR(45) NOT NULL, sort_order INT, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE act_type (id INT AUTO_INCREMENT, designation VARCHAR(45) NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE address (id INT AUTO_INCREMENT, street VARCHAR(80), telephone_number VARCHAR(20), address_city_id INT, INDEX address_city_id_idx (address_city_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE address_city (id INT AUTO_INCREMENT, name VARCHAR(90), postal_code VARCHAR(45), insee_code VARCHAR(45), address_country_id INT, INDEX address_country_id_idx (address_country_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE address_country (id INT AUTO_INCREMENT, name VARCHAR(45) NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE building (id INT AUTO_INCREMENT, designation VARCHAR(45) NOT NULL, shortened_designation VARCHAR(20) NOT NULL, address_id INT NOT NULL, INDEX address_id_idx (address_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE computer (id INT AUTO_INCREMENT, name VARCHAR(45) NOT NULL, shortened_name VARCHAR(20) NOT NULL, comment VARCHAR(250), year INT, mac_address VARCHAR(45), ip_address VARCHAR(45), room_id INT, computer_machine_type_id INT NOT NULL, computer_os_id INT, computer_type_of_connexion_id INT NOT NULL, INDEX computer_machine_type_id_idx (computer_machine_type_id), INDEX computer_os_id_idx (computer_os_id), INDEX room_id_idx (room_id), INDEX computer_type_of_connexion_id_idx (computer_type_of_connexion_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE computer_machine_type (id INT AUTO_INCREMENT, designation VARCHAR(45) NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE computer_os (id INT AUTO_INCREMENT, designation VARCHAR(45) NOT NULL, computer_os_family_id INT, sort_order INT, INDEX computer_os_family_id_idx (computer_os_family_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE computer_os_family (id INT AUTO_INCREMENT, family VARCHAR(10) NOT NULL, sort_order INT, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE computer_type_of_connexion (id INT AUTO_INCREMENT, designation VARCHAR(45) NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE filter (id INT, name VARCHAR(255), description VARCHAR(255), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE financier (id INT AUTO_INCREMENT, name VARCHAR(45) NOT NULL, logo_path VARCHAR(80), comment VARCHAR(250), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE imputation (id INT AUTO_INCREMENT, date DATETIME, total FLOAT(18, 2), imputation_type INT, comment VARCHAR(250), user_id INT, moderator_id INT, account_id INT, act_id INT, room_id INT, building_id INT, method_of_payment_id INT NOT NULL, unity_id INT NOT NULL, INDEX account_id_idx (account_id), INDEX act_id_idx (act_id), INDEX building_id_idx (building_id), INDEX method_of_payment_id_idx (method_of_payment_id), INDEX moderator_id_idx (moderator_id), INDEX room_id_idx (room_id), INDEX unity_id_idx (unity_id), INDEX user_id_idx (user_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE imputation_account_transaction (id INT AUTO_INCREMENT, designation VARCHAR(45) NOT NULL, sum FLOAT(18, 2) NOT NULL, imputation_id INT, INDEX imputation_id_idx (imputation_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE imputation_archive (id INT AUTO_INCREMENT, imputation_id INT, imputation_date DATETIME NOT NULL, imputation_type VARCHAR(45) NOT NULL, duration TIME, designation VARCHAR(45) NOT NULL, price FLOAT(18, 2) NOT NULL, method_of_payment VARCHAR(45) NOT NULL, building_designation VARCHAR(45), room_designation VARCHAR(45), computer_name VARCHAR(45), computer_type_of_connexion VARCHAR(45), user_archive_id INT NOT NULL, INDEX user_archive_id_idx (user_archive_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE imputation_countable_service (id INT AUTO_INCREMENT, initial_value FLOAT(18, 2) NOT NULL, imputation_id INT, INDEX imputation_id_idx (imputation_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE imputation_method_of_payment (id INT AUTO_INCREMENT, designation VARCHAR(45) NOT NULL, sort_order INT, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE imputation_purchase (id INT AUTO_INCREMENT, number_of_unities INT NOT NULL, imputation_id INT, INDEX imputation_id_idx (imputation_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE imputation_subscription (id INT AUTO_INCREMENT, number_of_members INT NOT NULL, final_date DATE NOT NULL, imputation_id INT, INDEX imputation_id_idx (imputation_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE imputation_unitary_service (id INT AUTO_INCREMENT, number_of_unities INT NOT NULL, beginning_time TIME NOT NULL, end_time TIME NOT NULL, computer_id INT, imputation_id INT, INDEX computer_id_idx (computer_id), INDEX imputation_id_idx (imputation_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE list_filter (list_id INT, filter_id INT, order INT, PRIMARY KEY(list_id, filter_id)) ENGINE = INNODB;
CREATE TABLE lists (id INT, name VARCHAR(255), type VARCHAR(1), origin VARCHAR(2), static TINYINT, content TEXT, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE login (id INT AUTO_INCREMENT, login VARCHAR(20) NOT NULL, password VARCHAR(40) NOT NULL, is_moderator TINYINT NOT NULL, locked TINYINT, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE moderator (id INT AUTO_INCREMENT, name VARCHAR(45) NOT NULL, surname VARCHAR(45) NOT NULL, email VARCHAR(80) NOT NULL, login_id INT NOT NULL, INDEX login_id_idx (login_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE room (id INT AUTO_INCREMENT, designation VARCHAR(45) NOT NULL, shortened_designation VARCHAR(20) NOT NULL, comment VARCHAR(250), building_id INT, INDEX building_id_idx (building_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE structure (id VARCHAR(45), name VARCHAR(45) NOT NULL, email VARCHAR(80), siret_number VARCHAR(250), logo_path VARCHAR(80), website VARCHAR(250), telephone_number VARCHAR(20), address_id INT NOT NULL, INDEX address_id_idx (address_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE unity (id INT AUTO_INCREMENT, designation VARCHAR(45) NOT NULL, shortened_designation VARCHAR(20) NOT NULL, disabled TINYINT, sort_order INT, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE user (id INT AUTO_INCREMENT, name VARCHAR(45) NOT NULL, surname VARCHAR(45) NOT NULL, birthdate DATE NOT NULL, created_at DATETIME NOT NULL, organization_name VARCHAR(45), email VARCHAR(80), cellphone_number VARCHAR(20), comment VARCHAR(250), user_gender_id INT, user_seg_id INT, address_id INT, user_awareness_id INT, login_id INT, act_public_category_id INT, INDEX user_awareness_id_idx (user_awareness_id), INDEX login_id_idx (login_id), INDEX act_public_category_id_idx (act_public_category_id), INDEX address_id_idx (address_id), INDEX user_seg_id_idx (user_seg_id), INDEX user_gender_id_idx (user_gender_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE user_archive (id INT AUTO_INCREMENT, age INT, created_at DATETIME, city_name VARCHAR(90), country VARCHAR(45), gender VARCHAR(45), seg VARCHAR(45), awareness VARCHAR(45), category VARCHAR(45), user_id INT, deleted_at DATETIME, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE user_awareness (id INT AUTO_INCREMENT, designation VARCHAR(45) NOT NULL, sort_order INT, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE user_gender (id INT AUTO_INCREMENT, designation VARCHAR(45), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE user_seg (id INT AUTO_INCREMENT, designation VARCHAR(45) NOT NULL, sort_order INT, PRIMARY KEY(id)) ENGINE = INNODB;
ALTER TABLE account ADD CONSTRAINT account_act_id_act_id FOREIGN KEY (act_id) REFERENCES act(id);
ALTER TABLE account_user ADD CONSTRAINT account_user_user_id_user_id FOREIGN KEY (user_id) REFERENCES user(id);
ALTER TABLE account_user ADD CONSTRAINT account_user_account_id_account_id FOREIGN KEY (account_id) REFERENCES account(id);
ALTER TABLE act ADD CONSTRAINT act_unity_id_unity_id FOREIGN KEY (unity_id) REFERENCES unity(id);
ALTER TABLE act ADD CONSTRAINT act_act_type_id_act_type_id FOREIGN KEY (act_type_id) REFERENCES act_type(id);
ALTER TABLE act_price ADD CONSTRAINT act_price_act_public_category_id_act_public_category_id FOREIGN KEY (act_public_category_id) REFERENCES act_public_category(id);
ALTER TABLE act_price ADD CONSTRAINT act_price_act_id_act_id FOREIGN KEY (act_id) REFERENCES act(id);
ALTER TABLE address ADD CONSTRAINT address_address_city_id_address_city_id FOREIGN KEY (address_city_id) REFERENCES address_city(id);
ALTER TABLE address_city ADD CONSTRAINT address_city_address_country_id_address_country_id FOREIGN KEY (address_country_id) REFERENCES address_country(id);
ALTER TABLE building ADD CONSTRAINT building_address_id_address_id FOREIGN KEY (address_id) REFERENCES address(id);
ALTER TABLE computer ADD CONSTRAINT computer_room_id_room_id FOREIGN KEY (room_id) REFERENCES room(id);
ALTER TABLE computer ADD CONSTRAINT computer_computer_os_id_computer_os_id FOREIGN KEY (computer_os_id) REFERENCES computer_os(id);
ALTER TABLE computer ADD CONSTRAINT computer_computer_machine_type_id_computer_machine_type_id FOREIGN KEY (computer_machine_type_id) REFERENCES computer_machine_type(id);
ALTER TABLE computer ADD CONSTRAINT ccci FOREIGN KEY (computer_type_of_connexion_id) REFERENCES computer_type_of_connexion(id);
ALTER TABLE computer_os ADD CONSTRAINT computer_os_computer_os_family_id_computer_os_family_id FOREIGN KEY (computer_os_family_id) REFERENCES computer_os_family(id);
ALTER TABLE imputation ADD CONSTRAINT imputation_user_id_user_id FOREIGN KEY (user_id) REFERENCES user(id);
ALTER TABLE imputation ADD CONSTRAINT imputation_unity_id_unity_id FOREIGN KEY (unity_id) REFERENCES unity(id);
ALTER TABLE imputation ADD CONSTRAINT imputation_room_id_room_id FOREIGN KEY (room_id) REFERENCES room(id);
ALTER TABLE imputation ADD CONSTRAINT imputation_moderator_id_moderator_id FOREIGN KEY (moderator_id) REFERENCES moderator(id);
ALTER TABLE imputation ADD CONSTRAINT imputation_method_of_payment_id_imputation_method_of_payment_id FOREIGN KEY (method_of_payment_id) REFERENCES imputation_method_of_payment(id);
ALTER TABLE imputation ADD CONSTRAINT imputation_building_id_building_id FOREIGN KEY (building_id) REFERENCES building(id);
ALTER TABLE imputation ADD CONSTRAINT imputation_act_id_act_id FOREIGN KEY (act_id) REFERENCES act(id);
ALTER TABLE imputation ADD CONSTRAINT imputation_account_id_account_id FOREIGN KEY (account_id) REFERENCES account(id);
ALTER TABLE imputation_account_transaction ADD CONSTRAINT imputation_account_transaction_imputation_id_imputation_id FOREIGN KEY (imputation_id) REFERENCES imputation(id);
ALTER TABLE imputation_archive ADD CONSTRAINT imputation_archive_user_archive_id_user_archive_id FOREIGN KEY (user_archive_id) REFERENCES user_archive(id);
ALTER TABLE imputation_countable_service ADD CONSTRAINT imputation_countable_service_imputation_id_imputation_id FOREIGN KEY (imputation_id) REFERENCES imputation(id);
ALTER TABLE imputation_purchase ADD CONSTRAINT imputation_purchase_imputation_id_imputation_id FOREIGN KEY (imputation_id) REFERENCES imputation(id);
ALTER TABLE imputation_subscription ADD CONSTRAINT imputation_subscription_imputation_id_imputation_id FOREIGN KEY (imputation_id) REFERENCES imputation(id);
ALTER TABLE imputation_unitary_service ADD CONSTRAINT imputation_unitary_service_imputation_id_imputation_id FOREIGN KEY (imputation_id) REFERENCES imputation(id);
ALTER TABLE imputation_unitary_service ADD CONSTRAINT imputation_unitary_service_computer_id_computer_id FOREIGN KEY (computer_id) REFERENCES computer(id);
ALTER TABLE list_filter ADD CONSTRAINT list_filter_list_id_lists_id FOREIGN KEY (list_id) REFERENCES lists(id);
ALTER TABLE list_filter ADD CONSTRAINT list_filter_filter_id_filter_id FOREIGN KEY (filter_id) REFERENCES filter(id);
ALTER TABLE moderator ADD CONSTRAINT moderator_login_id_login_id FOREIGN KEY (login_id) REFERENCES login(id);
ALTER TABLE room ADD CONSTRAINT room_building_id_building_id FOREIGN KEY (building_id) REFERENCES building(id);
ALTER TABLE structure ADD CONSTRAINT structure_address_id_address_id FOREIGN KEY (address_id) REFERENCES address(id);
ALTER TABLE user ADD CONSTRAINT user_user_seg_id_user_seg_id FOREIGN KEY (user_seg_id) REFERENCES user_seg(id);
ALTER TABLE user ADD CONSTRAINT user_user_gender_id_user_gender_id FOREIGN KEY (user_gender_id) REFERENCES user_gender(id);
ALTER TABLE user ADD CONSTRAINT user_user_awareness_id_user_awareness_id FOREIGN KEY (user_awareness_id) REFERENCES user_awareness(id);
ALTER TABLE user ADD CONSTRAINT user_login_id_login_id FOREIGN KEY (login_id) REFERENCES login(id);
ALTER TABLE user ADD CONSTRAINT user_address_id_address_id FOREIGN KEY (address_id) REFERENCES address(id);
ALTER TABLE user ADD CONSTRAINT user_act_public_category_id_act_public_category_id FOREIGN KEY (act_public_category_id) REFERENCES act_public_category(id);
